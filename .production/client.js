/*! For license information please see client.js.LICENSE.txt */
!function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}__webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=6)}([function(e,t,r){"use strict";r.d(t,"c",(function(){return __extends})),r.d(t,"a",(function(){return __assign})),r.d(t,"b",(function(){return __awaiter})),r.d(t,"d",(function(){return __generator})),r.d(t,"g",(function(){return __values})),r.d(t,"e",(function(){return __read})),r.d(t,"f",(function(){return __spreadArray}));var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function __assign(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function __awaiter(e,t,r,n){return new(r||(r=Promise))((function(o,i){function fulfilled(e){try{step(n.next(e))}catch(e){i(e)}}function rejected(e){try{step(n.throw(e))}catch(e){i(e)}}function step(e){e.done?o(e.value):function adopt(e){return e instanceof r?e:new r((function(t){t(e)}))}(e.value).then(fulfilled,rejected)}step((n=n.apply(e,t||[])).next())}))}function __generator(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function verb(i){return function(s){return function step(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}Object.create;function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}function __spreadArray(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}Object.create},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return i})),r.d(t,"d",(function(){return contains})),r.d(t,"e",(function(){return createSubscribe})),r.d(t,"f",(function(){return deepCopy})),r.d(t,"g",(function(){return deepExtend})),r.d(t,"h",(function(){return getModularInstance})),r.d(t,"i",(function(){return isBrowser})),r.d(t,"j",(function(){return isNode}));var n=r(0),stringToByteArray=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t[r++]=o:o<2048?(t[r++]=o>>6|192,t[r++]=63&o|128):55296==(64512&o)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(o=65536+((1023&o)<<10)+(1023&e.charCodeAt(++n)),t[r++]=o>>18|240,t[r++]=o>>12&63|128,t[r++]=o>>6&63|128,t[r++]=63&o|128):(t[r++]=o>>12|224,t[r++]=o>>6&63|128,t[r++]=63&o|128)}return t};function deepCopy(e){return deepExtend(void 0,e)}function deepExtend(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&"__proto__"!==r&&(e[r]=deepExtend(e[r],t[r]));return e}var o=function(){function Deferred(){var e=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(t,r){e.resolve=t,e.reject=r}))}return Deferred.prototype.wrapCallback=function(e){var t=this;return function(r,n){r?t.reject(r):t.resolve(n),"function"==typeof e&&(t.promise.catch((function(){})),1===e.length?e(r):e(r,n))}},Deferred}();function isNode(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}function isBrowser(){return"object"==typeof self&&self.self===self}var i=function(e){function FirebaseError(t,r,n){var o=e.call(this,r)||this;return o.code=t,o.customData=n,o.name="FirebaseError",Object.setPrototypeOf(o,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,a.prototype.create),o}return Object(n.c)(FirebaseError,e),FirebaseError}(Error),a=function(){function ErrorFactory(e,t,r){this.service=e,this.serviceName=t,this.errors=r}return ErrorFactory.prototype.create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n=t[0]||{},o=this.service+"/"+e,a=this.errors[e],s=a?replaceTemplate(a,n):"Error",c=this.serviceName+": "+s+" ("+o+").",u=new i(o,c,n);return u},ErrorFactory}();function replaceTemplate(e,t){return e.replace(s,(function(e,r){var n=t[r];return null!=n?String(n):"<"+r+"?>"}))}var s=/\{\$([^}]+)}/g;function contains(e,t){return Object.prototype.hasOwnProperty.call(e,t)}!function(){function Sha1(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}Sha1.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},Sha1.prototype.compress_=function(e,t){t||(t=0);var r=this.W_;if("string"==typeof e)for(var n=0;n<16;n++)r[n]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(n=0;n<16;n++)r[n]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(n=16;n<80;n++){var o=r[n-3]^r[n-8]^r[n-14]^r[n-16];r[n]=4294967295&(o<<1|o>>>31)}var i,a,s=this.chain_[0],c=this.chain_[1],u=this.chain_[2],l=this.chain_[3],d=this.chain_[4];for(n=0;n<80;n++){n<40?n<20?(i=l^c&(u^l),a=1518500249):(i=c^u^l,a=1859775393):n<60?(i=c&u|l&(c|u),a=2400959708):(i=c^u^l,a=3395469782);o=(s<<5|s>>>27)+i+d+a+r[n]&4294967295;d=l,l=u,u=4294967295&(c<<30|c>>>2),c=s,s=o}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295},Sha1.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var r=t-this.blockSize,n=0,o=this.buf_,i=this.inbuf_;n<t;){if(0===i)for(;n<=r;)this.compress_(e,n),n+=this.blockSize;if("string"==typeof e){for(;n<t;)if(o[i]=e.charCodeAt(n),++n,++i===this.blockSize){this.compress_(o),i=0;break}}else for(;n<t;)if(o[i]=e[n],++n,++i===this.blockSize){this.compress_(o),i=0;break}}this.inbuf_=i,this.total_+=t}},Sha1.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);var n=0;for(r=0;r<5;r++)for(var o=24;o>=0;o-=8)e[n]=this.chain_[r]>>o&255,++n;return e}}();function createSubscribe(e,t){var r=new c(e,t);return r.subscribe.bind(r)}var c=function(){function ObserverProxy(e,t){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((function(){e(r)})).catch((function(e){r.error(e)}))}return ObserverProxy.prototype.next=function(e){this.forEachObserver((function(t){t.next(e)}))},ObserverProxy.prototype.error=function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)},ObserverProxy.prototype.complete=function(){this.forEachObserver((function(e){e.complete()})),this.close()},ObserverProxy.prototype.subscribe=function(e,t,r){var n,o=this;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");void 0===(n=function implementsAnyMethods(e,t){if("object"!=typeof e||null===e)return!1;for(var r=0,n=t;r<n.length;r++){var o=n[r];if(o in e&&"function"==typeof e[o])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r}).next&&(n.next=noop),void 0===n.error&&(n.error=noop),void 0===n.complete&&(n.complete=noop);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{o.finalError?n.error(o.finalError):n.complete()}catch(e){}})),this.observers.push(n),i},ObserverProxy.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},ObserverProxy.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},ObserverProxy.prototype.sendOne=function(e,t){var r=this;this.task.then((function(){if(void 0!==r.observers&&void 0!==r.observers[e])try{t(r.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}}))},ObserverProxy.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))},ObserverProxy}();function noop(){}function getModularInstance(e){return e&&e._delegate?e._delegate:e}}).call(this,r(4))},function(e,t){},function(e,t,r){},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){},function(e,t,r){"use strict";r.r(t);const n=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*))(?:Z|(\+|-)([\d|:]*))?$/,o=/^\/Date\((d|-|.*)\)[\/|\\]$/;function dateParser(e,t){if("string"==typeof t){let e=n.exec(t);if(e)return new Date(t);if(e=o.exec(t),e){const t=e[1].split(/[-+,.]/);return new Date(t[0]?+t[0]:0-+t[1])}}return t}function deserialize(e){return JSON.parse(e,dateParser)}function fragment({children:e}){return e}function element_element(e,t,...r){r=function flattenChildren(e){return e=[].concat.apply([],e).map(e=>null!=e&&e),[].concat.apply([],e)}(r),"textarea"===e&&(r=[r.join("")]);const n={...t,children:r};return"element"===e&&(e=n.tag||fragment,delete n.tag),"function"==typeof e&&void 0!==e.render?{type:e,attributes:n,children:null}:{type:e,attributes:n,children:r}}function extractParamValue(e){return"true"===e||"false"!==e&&(e?decodeURIComponent(e.replace(/\+/g," ")):"")}function serializeParam(e){return e&&void 0!==e.toJSON?e.toJSON():e}function serializeSearch(e){return Object.keys(e).map(t=>!1===e[t]||e[t]?`${t}=${e[t]}`:"").filter(e=>!!e).join("&")}const i={};var a=i;const s={set(e,t,r){const n=serializeParam(r);e[t]=n;const o=serializeSearch(e);return T.url=T.path+(o?"?":"")+o,!0},get:(e,t)=>!1!==e[t]&&(!1!==a[t]&&(e[t]||a[t]||""))},c={...window.params};delete window.params;const u=new Proxy(c,s);function updateParams(e){!function resetSegments(){for(const e in i)delete i[e]}();const t=function getQueryStringParams(e){const[t,r]=e.split("?");return r?r.split("&").reduce((e,t)=>{let[r,n]=t.split("=");return e[r]=extractParamValue(n),e},{}):{}}(e);for(const e of Object.keys({...t,...c}))c[e]=t[e];return u}var l=u;const d={...window.environment,client:!0,server:!1};Object.freeze(d);var p=d;function extractLocation(e){let[t,r]=e.split("#"),[n,o]=t.split("?");"/"!==n&&n.endsWith("/")&&(n=n.substring(0,n.length-1));let i=n;o&&(i+="?"+o);let a=i;return r&&(a+="#"+r),void 0===r&&(r=""),{path:n,search:o,url:i,urlWithHash:a,hash:r}}function isFalse(e){return null==e||!1===e||"object"==typeof e&&(void 0===e.type||null===e.type||!1===e.type)}function isText(e){return void 0===e.children}function anchorableElement(e){const t=e.querySelectorAll('a[href^="/"]:not([target])');for(const e of t)e.onclick=t=>{t.preventDefault(),T.url=e.getAttribute("href")}}function render(e,t){if(isFalse(e)||"head"===e.type)return document.createComment("");if(isText(e))return document.createTextNode(e);const r=t&&t.svg||"svg"===e.type;let n;n=r?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type),e.instance&&(e.instance._self.element=n);for(let t in e.attributes)if("html"===t)n.innerHTML=e.attributes[t],anchorableElement(n);else if(t.startsWith("on")){const r=t.replace("on",""),o="_event."+r;e[o]=r=>{!0!==e.attributes.default&&r.preventDefault(),e.attributes[t]({...e.attributes,event:r})},n.addEventListener(r,e[o])}else{const r=typeof e.attributes[t];"object"!==r&&"function"!==r&&("value"!=t&&!0===e.attributes[t]?n.setAttribute(t,""):("value"==t||!1!==e.attributes[t]&&null!==e.attributes[t]&&void 0!==e.attributes[t])&&n.setAttribute(t,e.attributes[t]))}if(!e.attributes.html){for(let t=0;t<e.children.length;t++){const o=render(e.children[t],{svg:r});n.appendChild(o)}"select"==e.type&&(n.value=e.attributes.value)}return n}function rerender(e,t,r){if(t=void 0===t?y.virtualDom:t,(r=void 0===r?y.nextVirtualDom:r).instance&&(r.instance._self.element=e),!y.hydrated&&e)for(const t of e.childNodes)t.tagName&&"textarea"==t.tagName.toLowerCase()&&0==t.childNodes.length&&t.appendChild(document.createTextNode("")),8===t.COMMENT_NODE&&"#"===t.textContent&&e.removeChild(t);if(!isFalse(t)||!isFalse(r)){if((isFalse(t)||isFalse(r))&&t!=r){const t=render(r);return e.replaceWith(t)}if("head"!=t.type||"head"!=r.type){if("head"==t.type||"head"==r.type){const t=render(r);return e.replaceWith(t)}if(t.type!==r.type){const t=render(r);return e.replaceWith(t)}if(isText(t)&&isText(r))t!=r&&(e.nodeValue=r);else if(t.type===r.type){const n=Object.keys({...t.attributes,...r.attributes});for(const o of n)if("html"===o)r.attributes[o]!==t.attributes[o]&&(e.innerHTML=r.attributes[o],anchorableElement(e));else if("checked"===o)r.attributes[o]!==e.value&&(e.checked=r.attributes[o]);else if("value"===o)r.attributes[o]!==e.value&&(e.value=r.attributes[o]);else if(o.startsWith("on")){const n=o.replace("on",""),i="_event."+n;e.removeEventListener(n,t[i]),r.attributes[o]&&(r[i]=e=>{!0!==r.attributes.default&&e.preventDefault(),r.attributes[o]({...r.attributes,event:e})},e.addEventListener(n,r[i]))}else{const n=typeof r.attributes[o];"object"!==n&&"function"!==n&&(void 0!==t.attributes[o]&&void 0===r.attributes[o]?e.removeAttribute(o):t.attributes[o]!==r.attributes[o]&&("value"!=o&&!1===r.attributes[o]||null===r.attributes[o]||void 0===r.attributes[o]?e.removeAttribute(o):"value"!=o&&!0===r.attributes[o]?e.setAttribute(o,""):e.setAttribute(o,r.attributes[o])))}if(r.attributes.html)return;const o=Math.max(t.children.length,r.children.length);if(r.children.length>t.children.length){for(let n=0;n<t.children.length;n++)rerender(e.childNodes[n],t.children[n],r.children[n]);for(let n=t.children.length;n<r.children.length;n++){const t=render(r.children[n]);e.appendChild(t)}}else if(t.children.length>r.children.length){for(let n=0;n<r.children.length;n++)rerender(e.childNodes[n],t.children[n],r.children[n]);for(let n=t.children.length-1;n>=r.children.length;n--)e.removeChild(e.childNodes[n])}else for(let n=o-1;n>-1;n--)rerender(e.childNodes[n],t.children[n],r.children[n]);"textarea"==r.type&&(e.value=r.children.join("")),"select"==r.type&&(e.value=r.attributes.value)}}}}const h={set(e,t,r){return isProxyable(t,r)?(r._isProxy=!0,e[t]=new Proxy(r,this)):e[t]=r,t.startsWith("_")||y.update(),!0},get(e,t){return"_isProxy"===t||Reflect.get(...arguments)}};function isProxyable(e,t){return!(e.startsWith("_")||null===t||"object"!=typeof t||void 0!==t._isProxy||t instanceof Date)}function generateObjectProxy(e,t){if(isProxyable(e,t)){if("object"==typeof t)for(const e of Object.keys(t))t[e]=generateObjectProxy(e,t[e]);return new Proxy(t,h)}return t}const f={},m=deserialize(JSON.stringify(window.context));for(const e of Object.keys(m))f[e]=generateObjectProxy(e,m[e]);const b={set:(e,t,r)=>(f[t]=generateObjectProxy(t,r),y.update(),!0),get:(e,t)=>"_isProxy"===t||(void 0===e[t]?f[t]:e[t])};function generateContext(e){return new Proxy(e,b)}var _=f;function erase(e){e.type=!1,delete e.attributes,delete e.children}function camelize(e){return e.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,(e,t)=>t.toUpperCase())}function kebabize(e){return e.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase()}let g=[{transform:function objectable_transform({node:e}){if(function objectable_match(e){return e&&void 0!==e.attributes}(e))for(const t in e.attributes)if(t.startsWith("on")&&"object"==typeof e.attributes[t]){const r=e.attributes.source,n=e.attributes[t];e.attributes[t]=function(){Object.assign(r,n)}.bind(r)}},client:!0},{transform:function parameterizable_transform({node:e,router:t,params:r}){if(!function parameterizable_match(e){return e&&e.attributes&&(e.attributes.params||e.attributes.path)}(e))return;let n;if(e.attributes.params){n={};for(const t in e.attributes.params)n[t]=serializeParam(e.attributes.params[t])}else n=r;const o=serializeSearch(n),i=e.attributes.path||t.path;e.attributes.href=i+(o?"?":"")+o,delete e.attributes.path,delete e.attributes.params},client:!0,server:!0},{transform:function anchorable_transform({node:e,router:t}){if(!function anchorable_match(e){return e&&"a"===e.type&&e.attributes.href&&e.attributes.href.startsWith("/")&&!e.attributes.target}(e))return;const r=e.attributes.onclick;e.attributes.onclick=({event:n})=>{n.preventDefault(),t.url=e.attributes.href,r&&setTimeout(()=>{r({...e.attributes,event:n})},0)}},client:!0},{load:function load({router:e}){e._routes={},e._oldSegments?(e._oldSegments=e._newSegments,e._newSegments={}):(e._oldSegments={},e._newSegments={})},transform:function transform({node:e,depth:t,router:r}){if(!function match(e){return e&&void 0!==e.attributes&&void 0!==e.attributes.route}(e))return;const n=t.slice(0,-1).join(".");if(void 0!==r._routes[n])erase(e);else{const t=function routeMatches(e,t){let{path:r}=extractLocation(e);const n=r.split("/"),o=t.split("/"),i={},a=Math.max(n.length,o.length);let s=!1;for(let e=0;e<a;e++)if(!s)if("*"===o[e])s=!0;else if(o[e]&&o[e].startsWith(":")){i[o[e].replace(":","")]=extractParamValue(n[e])}else if(o[e]!==n[e])return!1;return i}(r.url,e.attributes.route);t?(r._routes[n]=!0,r._newSegments[n]=t,Object.assign(r._segments,t)):erase(e)}},client:!0,server:!0},{transform:function datable_transform({node:e}){if(function datable_match(e){return e&&void 0!==e.attributes}(e)){e.attributes.data=e.attributes.data||{};for(const t in e.attributes)if(t.startsWith("data-")){const r=camelize(t.slice(5));e.attributes.data[r]=e.attributes[t]}for(const t in e.attributes.data){const r="data-"+kebabize(t);e.attributes[r]=e.attributes.data[t]}}},client:!0,server:!0},{transform:function bindable_transform({node:e,environment:t}){if(!function bindable_match(e){return void 0!==e&&void 0!==e.attributes&&void 0!==e.attributes.bind&&void 0!==e.attributes.source}(e))return;const r=e.attributes.source;"textarea"===e.type?e.children=[r[e.attributes.bind]]:"input"===e.type&&"checkbox"===e.attributes.type?e.attributes.checked=r[e.attributes.bind]:e.attributes.value=r[e.attributes.bind],e.attributes.name=e.attributes.name||e.attributes.bind,t.client&&function attachEvent(e){const t=e.attributes.source;let r="oninput",n="value";"checkbox"===e.attributes.type||"radio"===e.attributes.type?(r="onclick",n="checked"):"input"!==e.type&&"textarea"!==e.type&&(r="onchange");const o=e.attributes[r];e.attributes[r]=({event:r,value:i})=>{"checked"==n?t[e.attributes.bind]=r.target[n]:!0===t[e.attributes.bind]||!1===t[e.attributes.bind]?t[e.attributes.bind]=r?"true"==r.target[n]:i:"number"==typeof t[e.attributes.bind]?t[e.attributes.bind]=parseFloat(r?r.target[n]:i)||0:t[e.attributes.bind]=r?r.target[n]:i,void 0!==o&&setTimeout(()=>{o({...e.attributes,event:r,value:i})},0)}}(e)},client:!0,server:!0}];function loadPlugins(e){for(const t of g)t.load&&t.load(e.context);return g}async function generateBranch(e,t,r,n){if(function transformNodes(e,t,r){for(const n of g)n.transform({...e.context,node:t,depth:r})}(n,t,r),isFalse(t))e.children.push(!1);else if(function isClass(e){return"function"==typeof e.type&&e.type.prototype&&"function"==typeof e.type.prototype.render}(t)){const o=t.attributes.key||function generateKey(e){return 1===e.length?"application":"n-"+e.join("-")}(r);if(n.context.environment.client&&n.context.router._changed&&t.attributes&&t.attributes.route&&!n.context.environment.static){const e=r.slice(0,-1).join("."),t=n.context.router._newSegments[e];if(t){const r=n.context.router._oldSegments[e];for(const e in t)r[e]!==t[e]&&(delete n.memory[o],delete n.instances[o])}}const i=n.instances[o]||new t.type(n);let a;i._self.key=o,i._attributes=t.attributes,i._scope=n,n.memory&&(a=n.memory[o],a&&(i._self.initiated=!0,Object.assign(i,a),delete n.memory[o]));let s=!1;const c=void 0===n.instances[o];n.instances[o]=i,c&&(void 0===a&&(i.prepare&&i.prepare(),n.context.environment.server?(i.initiate&&await i.initiate(),i._self.initiated=!0):n.initiationQueue.push(i)),s=!0),n.hydrationQueue&&(s?n.hydrationQueue.push(i):1==i._self.initiated&&i.update&&i.update()),n.context.environment.client&&n.renewalQueue.push(i);const u=i.render();u&&u.type&&(u.instance=i),t.children=[].concat(u);for(let o=0;o<t.children.length;o++)await generateBranch(e,t.children[o],[...r,o],n)}else if(function isFunction(e){return"function"==typeof e.type}(t)){const o=t.type.name?n.generateContext(t.attributes):t.attributes,i=t.type(o);t.children=[].concat(i);for(let o=0;o<t.children.length;o++)await generateBranch(e,t.children[o],[...r,o],n)}else if(t.type){const o={type:t.type,attributes:t.attributes||{},instance:t.instance,children:[]};if(t.children)for(let e=0;e<t.children.length;e++)await generateBranch(o,t.children[e],[...r,e],n);e.children.push(o)}else e.children.push(t)}async function generateTree(e,t){const r={type:"div",attributes:{id:"application"},children:[]};return await generateBranch(r,e,[0],t),r}const v={initialized:!1,hydrated:!1,initializer:null,instances:{}};_.instances=v.instances,v.initiationQueue=[],v.renewalQueue=[],v.hydrationQueue=[],v.virtualDom={},v.selector=null,v.events={},v.generateContext=generateContext,v.renderQueue=null,v.update=async function(){v.initialized&&(clearInterval(v.renderQueue),v.renderQueue=setTimeout(async()=>{const e=v;e.context=_,e.plugins=loadPlugins(e),v.initialized=!1,v.initiationQueue=[],v.renewalQueue=[],v.hydrationQueue=[],v.nextVirtualDom=await generateTree(v.initializer(),e),rerender(v.selector),v.virtualDom=v.nextVirtualDom,v.nextVirtualDom=null,v.processLifecycleQueues()},16))},v.processLifecycleQueues=async function(){v.initialized||(v.initialized=!0,v.hydrated=!0);const e=v.initiationQueue,t=v.hydrationQueue;for(const t of e)t.initiate&&await t.initiate(),t._self.initiated=!0;e.length&&v.update();for(const e of t)e.hydrate&&await e.hydrate(),e._self.hydrated=!0;t.length&&v.update();for(const e in v.instances){const t=v.instances[e];v.renewalQueue.includes(t)||(t.terminate&&await t.terminate(),delete v.instances[e])}T._changed=!1};var y=v;const w={...window.worker};w.online=navigator.onLine,delete window.worker;const k=Object.freeze([]),R={set:(e,t,r)=>(e[t]=r,y.update(),!0),get:(e,t)=>e[t]||k};w.queues=new Proxy({},R);const O=new Proxy(w,{set:(e,t,r)=>(e[t]!==r&&(e[t]=r,y.update()),!0)});if(w.enabled){window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),O.installation=e})),async function register(){if("serviceWorker"in navigator){const e=`/service-worker-${p.key}.js`;try{O.registration=await navigator.serviceWorker.register(e,{scope:"/"})}catch(e){console.log(e)}}}()}window.addEventListener("online",()=>{O.online=!0,p.static?T._update(T.url):O.responsive=!0}),window.addEventListener("offline",()=>{O.online=!1});var S=O;function windowEvent(e){clearTimeout(null),setTimeout(()=>{const t=new Event("nullstack."+e);window.dispatchEvent(t)},0)}const x={...window.page,event:"nullstack.page"};delete window.page;var C=new Proxy(x,{set(e,t,r){"title"===t&&(document.title=r);const n=Reflect.set(...arguments);return"title"===t&&windowEvent("page"),y.update(),n}});function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let P=null;var T=new class router_Router{constructor(){_defineProperty(this,"event","nullstack.router"),_defineProperty(this,"_changed",!1),_defineProperty(this,"_segments",a);const{hash:e,url:t}=extractLocation(window.location.pathname+window.location.search);this._url=t,this._hash=e}async _popState(){const{urlWithHash:e}=extractLocation(window.location.pathname+window.location.search);await this._update(e,!1)}async _update(e,t){const{url:r,path:n,hash:o,urlWithHash:i}=extractLocation(e);clearTimeout(P),P=setTimeout(async()=>{if(C.status=200,p.static){S.fetching=!0;const e="/index.json",t="/"===n?e:n+e;try{const e=await fetch(t),n=await e.json(r);y.memory=n.instances;for(const e in n.page)C[e]=n.page[e];S.responsive=!0}catch(e){S.responsive=!1}S.fetching=!1}t&&history.pushState({},document.title,i),this._url=r,this._hash=o,this._changed=!0,updateParams(r),y.update(),windowEvent("router")},0)}async _redirect(e){if(e.startsWith("http"))return window.location.href=e;const{url:t,hash:r,urlWithHash:n}=extractLocation(e);t===this._url&&this._hash===r||await this._update(n,!0),r||window.scroll(0,0)}get url(){return this._url}set url(e){this._redirect(e)}get path(){return extractLocation(this._url).path}set path(e){this._redirect(e+window.location.search)}};var E={get(e,t){return"_isProxy"===t||("function"!=typeof e[t]||e[t].name.startsWith("_")||"constructor"===t?Reflect.get(...arguments):r=>{const n=generateContext({...e._attributes,...r,self:e._self});return e[t](n)})},set:(e,t,r)=>(e[t]=generateObjectProxy(t,r),t.startsWith("_")||y.update(),!0)};const j={...window.settings};delete window.settings,Object.freeze(j);var A=j;const U={...window.project};delete window.project,Object.freeze(U);var I=U;r(2);function client_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}_.page=C,_.router=T,_.settings=A,_.worker=S,_.params=l,_.project=I,_.environment=window.environment,y.memory=deserialize(JSON.stringify(window.instances));const L=y;L.generateContext=generateContext,L.context=_,y.plugins=loadPlugins(L);class client_Nullstack{static async start(e){window.addEventListener("popstate",()=>{T._popState()}),y.routes={},updateParams(T.url),y.currentInstance=null,y.initializer=()=>element_element(e),y.selector=document.querySelector("#application"),y.virtualDom=await generateTree(y.initializer(),L),_.environment=p,L.plugins=loadPlugins(L),y.nextVirtualDom=await generateTree(y.initializer(),L),rerender(y.selector),y.virtualDom=y.nextVirtualDom,y.nextVirtualDom=null,y.processLifecycleQueues(),delete window.context}constructor(){client_defineProperty(this,"_self",{prerendered:!1,initiated:!1,hydrated:!1});const e=function getProxyableMethods(e){let t=new Set,r=e;do{Object.getOwnPropertyNames(r).map(e=>t.add(e))}while((r=Object.getPrototypeOf(r))&&r!=Object.prototype);return[...t.keys()].filter(t=>"constructor"!==t&&"function"==typeof e[t]&&!t.startsWith("_")&&!e[t].name.startsWith("_"))}(this),t=new Proxy(this,E);for(const r of e)this[r]=this[r].bind(t);return t}render(){return!1}}client_defineProperty(client_Nullstack,"element",element_element),client_defineProperty(client_Nullstack,"invoke",(function invoke(e,t){return async function _invoke(r={}){var n;let o;S.fetching=!0,Object.isFrozen(S.queues[e])?S.queues[e]=[r]:S.queues[e]=[...S.queues[e],r];let i=`/nullstack/${t===this.constructor.hash?t:`${t}-${this.constructor.hash}`}/${e}.json`;try{const e=await fetch(i,{method:"POST",headers:S.headers,mode:"cors",cache:"no-cache",credentials:"same-origin",redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(r||{})});C.status=e.status;o=deserialize(await e.text()).result,S.responsive=!0}catch(e){S.responsive=!1}return 1===(null===(n=S.queues[e])||void 0===n?void 0:n.length)?delete S.queues[e]:S.queues[e]=S.queues[e].filter(e=>e!==r),S.fetching=!!Object.keys(S.queues).length,o}})),client_defineProperty(client_Nullstack,"fragment",fragment),client_defineProperty(client_Nullstack,"use",function usePlugins(e){return async(...t)=>{g=[...new Set([...t.flat(),...g])].filter(t=>t[e])}}("client"));var N=client_Nullstack,F=(r(3),r(0)),D=r(1),B=function(){function Component(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return Component.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},Component.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},Component.prototype.setServiceProps=function(e){return this.serviceProps=e,this},Component.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},Component}(),z=function(){function Provider(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return Provider.prototype.get=function(e){void 0===e&&(e="[DEFAULT]");var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var r=new D.a;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{var n=this.getOrInitializeService({instanceIdentifier:t});n&&r.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise},Provider.prototype.getImmediate=function(e){var t=Object(F.a)({identifier:"[DEFAULT]",optional:!1},e),r=t.identifier,n=t.optional,o=this.normalizeInstanceIdentifier(r);if(!this.isInitialized(o)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:o})}catch(e){if(n)return null;throw e}},Provider.prototype.getComponent=function(){return this.component},Provider.prototype.setComponent=function(e){var t,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if(function isComponentEager(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(e){}try{for(var n=Object(F.g)(this.instancesDeferred.entries()),o=n.next();!o.done;o=n.next()){var i=Object(F.e)(o.value,2),a=i[0],s=i[1],c=this.normalizeInstanceIdentifier(a);try{var u=this.getOrInitializeService({instanceIdentifier:c});s.resolve(u)}catch(e){}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}},Provider.prototype.clearInstance=function(e){void 0===e&&(e="[DEFAULT]"),this.instancesDeferred.delete(e),this.instances.delete(e)},Provider.prototype.delete=function(){return Object(F.b)(this,void 0,void 0,(function(){var e;return Object(F.d)(this,(function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Object(F.f)(Object(F.f)([],Object(F.e)(e.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()})))),Object(F.e)(e.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))))];case 1:return t.sent(),[2]}}))}))},Provider.prototype.isComponentSet=function(){return null!=this.component},Provider.prototype.isInitialized=function(e){return void 0===e&&(e="[DEFAULT]"),this.instances.has(e)},Provider.prototype.initialize=function(e){var t,r;void 0===e&&(e={});var n=e.instanceIdentifier,o=void 0===n?"[DEFAULT]":n,i=e.options,a=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(o);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:s,options:a});try{for(var u=Object(F.g)(this.instancesDeferred.entries()),l=u.next();!l.done;l=u.next()){var d=Object(F.e)(l.value,2),p=d[0],h=d[1];s===this.normalizeInstanceIdentifier(p)&&h.resolve(c)}}catch(e){t={error:e}}finally{try{l&&!l.done&&(r=u.return)&&r.call(u)}finally{if(t)throw t.error}}return c},Provider.prototype.getOrInitializeService=function(e){var t,r=e.instanceIdentifier,n=e.options,o=void 0===n?{}:n,i=this.instances.get(r);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(t=r,"[DEFAULT]"===t?void 0:t),options:o}),this.instances.set(r,i),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,r,i)}catch(e){}return i||null},Provider.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e},Provider.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},Provider}();var H,q=function(){function ComponentContainer(e){this.name=e,this.providers=new Map}return ComponentContainer.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},ComponentContainer.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},ComponentContainer.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new z(e,this);return this.providers.set(e,t),t},ComponentContainer.prototype.getProviders=function(){return Array.from(this.providers.values())},ComponentContainer}();function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)n[o]=i[a];return n}var M,W=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(M||(M={}));var V,$={debug:M.DEBUG,verbose:M.VERBOSE,info:M.INFO,warn:M.WARN,error:M.ERROR,silent:M.SILENT},X=M.INFO,G=((H={})[M.DEBUG]="log",H[M.VERBOSE]="log",H[M.INFO]="info",H[M.WARN]="warn",H[M.ERROR]="error",H),defaultLogHandler=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!(t<e.logLevel)){var o=(new Date).toISOString(),i=G[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[i].apply(console,__spreadArrays(["["+o+"]  "+e.name+":"],r))}},Q=function(){function Logger(e){this.name=e,this._logLevel=X,this._logHandler=defaultLogHandler,this._userLogHandler=null,W.push(this)}return Object.defineProperty(Logger.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in M))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),Logger.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?$[e]:e},Object.defineProperty(Logger.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(Logger.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),Logger.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,M.DEBUG],e)),this._logHandler.apply(this,__spreadArrays([this,M.DEBUG],e))},Logger.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,M.VERBOSE],e)),this._logHandler.apply(this,__spreadArrays([this,M.VERBOSE],e))},Logger.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,M.INFO],e)),this._logHandler.apply(this,__spreadArrays([this,M.INFO],e))},Logger.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,M.WARN],e)),this._logHandler.apply(this,__spreadArrays([this,M.WARN],e))},Logger.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,__spreadArrays([this,M.ERROR],e)),this._logHandler.apply(this,__spreadArrays([this,M.ERROR],e))},Logger}();function setLogLevel(e){W.forEach((function(t){t.setLogLevel(e)}))}var J,K=((V={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",V["bad-app-name"]="Illegal App name: '{$appName}",V["duplicate-app"]="Firebase App named '{$appName}' already exists",V["app-deleted"]="Firebase App named '{$appName}' already deleted",V["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",V["invalid-log-argument"]="First argument to `onLog` must be null or a function.",V),Z=new D.b("app","Firebase",K),Y=((J={})["@firebase/app"]="fire-core",J["@firebase/analytics"]="fire-analytics",J["@firebase/auth"]="fire-auth",J["@firebase/database"]="fire-rtdb",J["@firebase/functions"]="fire-fn",J["@firebase/installations"]="fire-iid",J["@firebase/messaging"]="fire-fcm",J["@firebase/performance"]="fire-perf",J["@firebase/remote-config"]="fire-rc",J["@firebase/storage"]="fire-gcs",J["@firebase/firestore"]="fire-fst",J["fire-js"]="fire-js",J["firebase-wrapper"]="fire-js-all",J),ee=new Q("@firebase/app"),te=function(){function FirebaseAppImpl(e,t,r){var n=this;this.firebase_=r,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=Object(D.f)(e),this.container=new q(t.name),this._addComponent(new B("app",(function(){return n}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(e){return n._addComponent(e)}))}return Object.defineProperty(FirebaseAppImpl.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!1,configurable:!0}),Object.defineProperty(FirebaseAppImpl.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(FirebaseAppImpl.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),FirebaseAppImpl.prototype.delete=function(){var e=this;return new Promise((function(t){e.checkDestroyed_(),t()})).then((function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map((function(e){return e.delete()})))})).then((function(){e.isDeleted_=!0}))},FirebaseAppImpl.prototype._getService=function(e,t){return void 0===t&&(t="[DEFAULT]"),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},FirebaseAppImpl.prototype._removeServiceInstance=function(e,t){void 0===t&&(t="[DEFAULT]"),this.container.getProvider(e).clearInstance(t)},FirebaseAppImpl.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){ee.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},FirebaseAppImpl.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},FirebaseAppImpl.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},FirebaseAppImpl.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Z.create("app-deleted",{appName:this.name_})},FirebaseAppImpl}();te.prototype.name&&te.prototype.options||te.prototype.delete||console.log("dc");function createFirebaseNamespaceCore(e){var t={},r=new Map,n={__esModule:!0,initializeApp:function initializeApp(r,o){void 0===o&&(o={});if("object"!=typeof o||null===o){o={name:o}}var i=o;void 0===i.name&&(i.name="[DEFAULT]");var a=i.name;if("string"!=typeof a||!a)throw Z.create("bad-app-name",{appName:String(a)});if(Object(D.d)(t,a))throw Z.create("duplicate-app",{appName:a});var s=new e(r,i,n);return t[a]=s,s},app:app,registerVersion:function registerVersion(e,t,r){var n,o=null!==(n=Y[e])&&void 0!==n?n:e;r&&(o+="-"+r);var i=o.match(/\s|\//),a=t.match(/\s|\//);if(i||a){var s=['Unable to register library "'+o+'" with version "'+t+'":'];return i&&s.push('library name "'+o+'" contains illegal characters (whitespace or "/")'),i&&a&&s.push("and"),a&&s.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void ee.warn(s.join(" "))}registerComponent(new B(o+"-version",(function(){return{library:o,version:t}}),"VERSION"))},setLogLevel:setLogLevel,onLog:function onLog(e,t){if(null!==e&&"function"!=typeof e)throw Z.create("invalid-log-argument");!function setUserLogHandler(e,t){for(var _loop_1=function(r){var n=null;t&&t.level&&(n=$[t.level]),r.userLogHandler=null===e?null:function(t,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var a=o.map((function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}})).filter((function(e){return e})).join(" ");r>=(null!=n?n:t.logLevel)&&e({level:M[r].toLowerCase(),message:a,args:o,type:t.name})}},r=0,n=W;r<n.length;r++){_loop_1(n[r])}}(e,t)},apps:null,SDK_VERSION:"8.4.0",INTERNAL:{registerComponent:registerComponent,removeApp:function removeApp(e){delete t[e]},components:r,useAsService:function useAsService(e,t){if("serverAuth"===t)return null;return t}}};function app(e){if(e=e||"[DEFAULT]",!Object(D.d)(t,e))throw Z.create("no-app",{appName:e});return t[e]}function registerComponent(o){var i=o.name;if(r.has(i))return ee.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===o.type?n[i]:null;if(r.set(i,o),"PUBLIC"===o.type){var serviceNamespace=function(e){if(void 0===e&&(e=app()),"function"!=typeof e[i])throw Z.create("invalid-app-argument",{appName:i});return e[i]()};void 0!==o.serviceProps&&Object(D.g)(serviceNamespace,o.serviceProps),n[i]=serviceNamespace,e.prototype[i]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=this._getService.bind(this,i);return r.apply(this,o.multipleInstances?e:[])}}for(var a=0,s=Object.keys(t);a<s.length;a++){var c=s[a];t[c]._addComponent(o)}return"PUBLIC"===o.type?n[i]:null}return n.default=n,Object.defineProperty(n,"apps",{get:function getApps(){return Object.keys(t).map((function(e){return t[e]}))}}),app.App=e,n}var re=function createFirebaseNamespace(){var e=createFirebaseNamespaceCore(te);return e.INTERNAL=Object(F.a)(Object(F.a)({},e.INTERNAL),{createFirebaseNamespace:createFirebaseNamespace,extendNamespace:function extendNamespace(t){Object(D.g)(e,t)},createSubscribe:D.e,ErrorFactory:D.b,deepExtend:D.g}),e}(),ne=function(){function PlatformLoggerService(e){this.container=e}return PlatformLoggerService.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(e){if(function isVersionServiceProvider(e){var t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null})).filter((function(e){return e})).join(" ")},PlatformLoggerService}();if(Object(D.i)()&&void 0!==self.firebase){ee.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var oe=self.firebase.SDK_VERSION;oe&&oe.indexOf("LITE")>=0&&ee.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var ie=re.initializeApp;re.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Object(D.j)()&&ee.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),ie.apply(void 0,e)};var ae=re;!function registerCoreComponents(e,t){e.INTERNAL.registerComponent(new B("platform-logger",(function(e){return new ne(e)}),"PRIVATE")),e.registerVersion("@firebase/app","0.6.20",t),e.registerVersion("fire-js","")}(ae);var se=ae;se.registerVersion("firebase","8.4.3","app");var ce=function(e){function FirebaseStorageError(t,r){var n=e.call(this,prependCode(t),"Firebase Storage: "+r+" ("+prependCode(t)+")")||this;return n.customData={serverResponse:null},n._baseMessage=n.message,Object.setPrototypeOf(n,FirebaseStorageError.prototype),n}return Object(F.c)(FirebaseStorageError,e),FirebaseStorageError.prototype._codeEquals=function(e){return prependCode(e)===this.code},Object.defineProperty(FirebaseStorageError.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),FirebaseStorageError}(D.c);function prependCode(e){return"storage/"+e}function unknown(){return new ce("unknown","An unknown error occurred, please check the error payload for server response.")}function index_esm_canceled(){return new ce("canceled","User canceled the upload/download.")}function cannotSliceBlob(){return new ce("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function invalidArgument(e){return new ce("invalid-argument",e)}function appDeleted(){return new ce("app-deleted","The Firebase app was deleted.")}function invalidRootOperation(e){return new ce("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(e,t){return new ce("invalid-format","String does not match format '"+e+"': "+t)}function internalError(e){throw new ce("internal-error","Internal error: "+e)}var ue={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},le=function le(e,t){this.data=e,this.contentType=t||null};function dataFromString(e,t){switch(e){case ue.RAW:return new le(utf8Bytes_(t));case ue.BASE64:case ue.BASE64URL:return new le(base64Bytes_(e,t));case ue.DATA_URL:return new le(function dataURLBytes_(e){var t=new de(e);return t.base64?base64Bytes_(ue.BASE64,t.rest):function percentEncodedBytes_(e){var t;try{t=decodeURIComponent(e)}catch(e){throw invalidFormat(ue.DATA_URL,"Malformed data URL.")}return utf8Bytes_(t)}(t.rest)}(t),function dataURLContentType_(e){return new de(e).contentType}(t))}throw unknown()}function utf8Bytes_(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|63&n);else if(55296==(64512&n))if(r<e.length-1&&56320==(64512&e.charCodeAt(r+1)))n=65536|(1023&n)<<10|1023&e.charCodeAt(++r),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n);else t.push(239,191,189);else 56320==(64512&n)?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(t)}function base64Bytes_(e,t){switch(e){case ue.BASE64:var r=-1!==t.indexOf("-"),n=-1!==t.indexOf("_");if(r||n)throw invalidFormat(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break;case ue.BASE64URL:var o=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(o||i)throw invalidFormat(e,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(t){throw invalidFormat(e,"Invalid character found")}for(var s=new Uint8Array(a.length),c=0;c<a.length;c++)s[c]=a.charCodeAt(c);return s}var de=function de(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw invalidFormat(ue.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=t[1]||null;null!=r&&(this.base64=function endsWith(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)};var pe,he={STATE_CHANGED:"state_changed"},fe={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function taskStateFromInternalTaskState(e){switch(e){case"running":case"pausing":case"canceling":return fe.RUNNING;case"paused":return fe.PAUSED;case"success":return fe.SUCCESS;case"canceled":return fe.CANCELED;case"error":default:return fe.ERROR}}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(pe||(pe={}));var me=function(){function NetworkXhrIo(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=pe.NO_ERROR,this.sendPromise_=new Promise((function(t){e.xhr_.addEventListener("abort",(function(){e.errorCode_=pe.ABORT,t(e)})),e.xhr_.addEventListener("error",(function(){e.errorCode_=pe.NETWORK_ERROR,t(e)})),e.xhr_.addEventListener("load",(function(){t(e)}))}))}return NetworkXhrIo.prototype.send=function(e,t,r,n){if(this.sent_)throw internalError("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==n)for(var o in n)n.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,n[o].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},NetworkXhrIo.prototype.getErrorCode=function(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_},NetworkXhrIo.prototype.getStatus=function(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},NetworkXhrIo.prototype.getResponseText=function(){if(!this.sent_)throw internalError("cannot .getResponseText() before sending");return this.xhr_.responseText},NetworkXhrIo.prototype.abort=function(){this.xhr_.abort()},NetworkXhrIo.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},NetworkXhrIo.prototype.addUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)},NetworkXhrIo.prototype.removeUploadProgressListener=function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)},NetworkXhrIo}(),be=function(){function XhrIoPool(){}return XhrIoPool.prototype.createXhrIo=function(){return new me},XhrIoPool}(),_e=function(){function Location(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(Location.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(Location.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),Location.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},Location.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},Location.makeFromBucketSpec=function(e,t){var r;try{r=Location.makeFromUrl(e,t)}catch(t){return new Location(e,"")}if(""===r.path)return r;throw function invalidDefaultBucket(e){return new ce("invalid-default-bucket","Invalid default bucket '"+e+"'.")}(e)},Location.makeFromUrl=function(e,t){var r=null;var n=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function httpModify(e){e.path_=decodeURIComponent(e.path)}for(var o=t.replace(/[.]/g,"\\."),i=[{regex:n,indices:{bucket:1,path:3},postModify:function gsModify(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:httpModify},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===t?"(?:storage.googleapis.com|storage.cloud.google.com)":t)+"/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:httpModify}],a=0;a<i.length;a++){var s=i[a],c=s.regex.exec(e);if(c){var u=c[s.indices.bucket],l=c[s.indices.path];l||(l=""),r=new Location(u,l),s.postModify(r);break}}if(null==r)throw function invalidUrl(e){return new ce("invalid-url","Invalid URL '"+e+"'.")}(e);return r},Location}(),ge=function(){function FailRequest(e){this.promise_=Promise.reject(e)}return FailRequest.prototype.getPromise=function(){return this.promise_},FailRequest.prototype.cancel=function(e){},FailRequest}();function isString(e){return"string"==typeof e||e instanceof String}function isNativeBlob(e){return isNativeBlobDefined()&&e instanceof Blob}function isNativeBlobDefined(){return"undefined"!=typeof Blob}function validateNumber(e,t,r,n){if(n<t)throw invalidArgument("Invalid value for '"+e+"'. Expected "+t+" or greater.");if(n>r)throw invalidArgument("Invalid value for '"+e+"'. Expected "+r+" or less.")}function makeUrl(e,t){var r=t.match(/^(\w+):\/\/.+/),n=t;return null==(null==r?void 0:r[1])&&(n="https://"+t),n+"/v0"+e}function makeQueryString(e){var t=encodeURIComponent,r="?";for(var n in e){if(e.hasOwnProperty(n))r=r+(t(n)+"="+t(e[n]))+"&"}return r=r.slice(0,-1)}var ve=function(){function NetworkRequest(e,t,r,n,o,i,a,s,c,u,l){var d=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=r,this.body_=n,this.successCodes_=o.slice(),this.additionalRetryCodes_=i.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=u,this.timeout_=c,this.pool_=l,this.promise_=new Promise((function(e,t){d.resolve_=e,d.reject_=t,d.start_()}))}return NetworkRequest.prototype.start_=function(){var e=this;function backoffDone(t,r){var n,o=e.resolve_,i=e.reject_,a=r.xhr;if(r.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());!function isJustDef(e){return void 0!==e}(s)?o():o(s)}catch(e){i(e)}else null!==a?((n=unknown()).serverResponse=a.getResponseText(),e.errorCallback_?i(e.errorCallback_(a,n)):i(n)):r.canceled?i(n=e.appDelete_?appDeleted():index_esm_canceled()):i(n=function retryLimitExceeded(){return new ce("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())}this.canceled_?backoffDone(0,new ye(!1,null,!0)):this.backoffId_=function start(e,t,r){var n=1,o=null,i=!1,a=0;function canceled(){return 2===a}var s=!1;function triggerCallback(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];s||(s=!0,t.apply(null,e))}function callWithDelay(t){o=setTimeout((function(){o=null,e(handler,canceled())}),t)}function handler(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(!s)if(e)triggerCallback.call.apply(triggerCallback,Object(F.f)([null,e],t));else{var o,c=canceled()||i;if(c)triggerCallback.call.apply(triggerCallback,Object(F.f)([null,e],t));else n<64&&(n*=2),1===a?(a=2,o=0):o=1e3*(n+Math.random()),callWithDelay(o)}}var c=!1;function stop(e){c||(c=!0,s||(null!==o?(e||(a=2),clearTimeout(o),callWithDelay(0)):e||(a=1)))}return callWithDelay(0),setTimeout((function(){i=!0,stop(!0)}),r),stop}((function doTheRequest(t,r){if(r)t(!1,new ye(!1,null,!0));else{var n=e.pool_.createXhrIo();e.pendingXhr_=n,null!==e.progressCallback_&&n.addUploadProgressListener(progressListener),n.send(e.url_,e.method_,e.body_,e.headers_).then((function(r){null!==e.progressCallback_&&r.removeUploadProgressListener(progressListener),e.pendingXhr_=null;var n=(r=r).getErrorCode()===pe.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var i=-1!==e.successCodes_.indexOf(o);t(!0,new ye(i,r))}else{var a=r.getErrorCode()===pe.ABORT;t(!1,new ye(!1,null,a))}}))}function progressListener(t){var r=t.loaded,n=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(r,n)}}),backoffDone,this.timeout_)},NetworkRequest.prototype.getPromise=function(){return this.promise_},NetworkRequest.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function index_esm_stop(e){e(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},NetworkRequest.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),n=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||n},NetworkRequest}(),ye=function ye(e,t,r){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!r};function getBlobBuilder(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function getBlob(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=getBlobBuilder();if(void 0!==r){for(var n=new r,o=0;o<e.length;o++)n.append(e[o]);return n.getBlob()}if(isNativeBlobDefined())return new Blob(e);throw new ce("unsupported-environment","This browser doesn't seem to support creating Blobs")}var we=function(){function FbsBlob(e,t){var r=0,n="";isNativeBlob(e)?(this.data_=e,r=e.size,n=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=n}return FbsBlob.prototype.size=function(){return this.size_},FbsBlob.prototype.type=function(){return this.type_},FbsBlob.prototype.slice=function(e,t){if(isNativeBlob(this.data_)){var r=function sliceBlob(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}(this.data_,e,t);return null===r?null:new FbsBlob(r)}return new FbsBlob(new Uint8Array(this.data_.buffer,e,t-e),!0)},FbsBlob.getBlob=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(isNativeBlobDefined()){var r=e.map((function(e){return e instanceof FbsBlob?e.data_:e}));return new FbsBlob(getBlob.apply(null,r))}var n=e.map((function(e){return isString(e)?dataFromString(ue.RAW,e).data:e.data_})),o=0;n.forEach((function(e){o+=e.byteLength}));var i=new Uint8Array(o),a=0;return n.forEach((function(e){for(var t=0;t<e.length;t++)i[a++]=e[t]})),new FbsBlob(i,!0)},FbsBlob.prototype.uploadData=function(){return this.data_},FbsBlob}();function jsonObjectOrNull(e){var t;try{t=JSON.parse(e)}catch(e){return null}return function isNonArrayObject(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}function lastComponent(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function noXform_(e,t){return t}var ke=function ke(e,t,r,n){this.server=e,this.local=t||e,this.writable=!!r,this.xform=n||noXform_},Re=null;function getMappings(){if(Re)return Re;var e=[];e.push(new ke("bucket")),e.push(new ke("generation")),e.push(new ke("metageneration")),e.push(new ke("name","fullPath",!0));var t=new ke("name");t.xform=function mappingsXformPath(e,t){return function xformPath(e){return!isString(e)||e.length<2?e:lastComponent(e)}(t)},e.push(t);var r=new ke("size");return r.xform=function xformSize(e,t){return void 0!==t?Number(t):t},e.push(r),e.push(new ke("timeCreated")),e.push(new ke("updated")),e.push(new ke("md5Hash",null,!0)),e.push(new ke("cacheControl",null,!0)),e.push(new ke("contentDisposition",null,!0)),e.push(new ke("contentEncoding",null,!0)),e.push(new ke("contentLanguage",null,!0)),e.push(new ke("contentType",null,!0)),e.push(new ke("metadata","customMetadata",!0)),Re=e}function fromResource(e,t,r){for(var n={type:"file"},o=r.length,i=0;i<o;i++){var a=r[i];n[a.local]=a.xform(n,t[a.server])}return function addRef(e,t){Object.defineProperty(e,"ref",{get:function generateRef(){var r=e.bucket,n=e.fullPath,o=new _e(r,n);return t._makeStorageReference(o)}})}(n,e),n}function fromResourceString(e,t,r){var n=jsonObjectOrNull(t);return null===n?null:fromResource(e,n,r)}function toResourceString(e,t){for(var r={},n=t.length,o=0;o<n;o++){var i=t[o];i.writable&&(r[i.server]=e[i.local])}return JSON.stringify(r)}function fromResponseString(e,t,r){var n=jsonObjectOrNull(r);return null===n?null:function fromBackendResponse(e,t,r){var n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r.prefixes)for(var o=0,i=r.prefixes;o<i.length;o++){var a=i[o].replace(/\/$/,""),s=e._makeStorageReference(new _e(t,a));n.prefixes.push(s)}if(r.items)for(var c=0,u=r.items;c<u.length;c++){var l=u[c];s=e._makeStorageReference(new _e(t,l.name));n.items.push(s)}return n}(e,t,n)}var Oe=function Oe(e,t,r,n){this.url=e,this.method=t,this.handler=r,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function handlerCheck(e){if(!e)throw unknown()}function metadataHandler(e,t){return function handler(r,n){var o=fromResourceString(e,n,t);return handlerCheck(null!==o),o}}function downloadUrlHandler(e,t){return function handler(r,n){var o=fromResourceString(e,n,t);return handlerCheck(null!==o),function downloadUrlFromResourceString(e,t,r){var n=jsonObjectOrNull(t);if(null===n)return null;if(!isString(n.downloadTokens))return null;var o=n.downloadTokens;if(0===o.length)return null;var i=encodeURIComponent;return o.split(",").map((function(t){var n=e.bucket,o=e.fullPath;return makeUrl("/b/"+i(n)+"/o/"+i(o),r)+makeQueryString({alt:"media",token:t})}))[0]}(o,n,e.host)}}function sharedErrorHandler(e){return function errorHandler(t,r){var n;return(n=401===t.getStatus()?function unauthenticated(){return new ce("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function quotaExceeded(e){return new ce("quota-exceeded","Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(e.bucket):403===t.getStatus()?function unauthorized(e){return new ce("unauthorized","User does not have permission to access '"+e+"'.")}(e.path):r).serverResponse=r.serverResponse,n}}function objectErrorHandler(e){var t=sharedErrorHandler(e);return function errorHandler(r,n){var o=t(r,n);return 404===r.getStatus()&&(o=function objectNotFound(e){return new ce("object-not-found","Object '"+e+"' does not exist.")}(e.path)),o.serverResponse=n.serverResponse,o}}function getMetadata(e,t,r){var n=makeUrl(t.fullServerUrl(),e.host),o=e.maxOperationRetryTime,i=new Oe(n,"GET",metadataHandler(e,r),o);return i.errorHandler=objectErrorHandler(t),i}function list(e,t,r,n,o){var i={};t.isRoot?i.prefix="":i.prefix=t.path+"/",r&&r.length>0&&(i.delimiter=r),n&&(i.pageToken=n),o&&(i.maxResults=o);var a=makeUrl(t.bucketOnlyServerUrl(),e.host),s=e.maxOperationRetryTime,c=new Oe(a,"GET",function listHandler(e,t){return function handler(r,n){var o=fromResponseString(e,t,n);return handlerCheck(null!==o),o}}(e,t.bucket),s);return c.urlParams=i,c.errorHandler=sharedErrorHandler(t),c}function metadataForUpload_(e,t,r){var n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=function determineContentType_(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),n}var Se=function Se(e,t,r,n){this.current=e,this.total=t,this.finalized=!!r,this.metadata=n||null};function checkResumeHeader_(e,t){var r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){handlerCheck(!1)}return handlerCheck(!!r&&-1!==(t||["active"]).indexOf(r)),r}function continueResumableUpload(e,t,r,n,o,i,a,s){var c=new Se(0,0);if(a?(c.current=a.current,c.total=a.total):(c.current=0,c.total=n.size()),n.size()!==c.total)throw function serverFileWrongSize(){return new ce("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();var u=c.total-c.current,l=u;o>0&&(l=Math.min(l,o));var d=c.current,p=d+l,h={"X-Goog-Upload-Command":l===u?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},f=n.slice(d,p);if(null===f)throw cannotSliceBlob();var m=t.maxUploadRetryTime,b=new Oe(r,"POST",(function handler(e,r){var o,a=checkResumeHeader_(e,["active","final"]),s=c.current+l,u=n.size();return o="final"===a?metadataHandler(t,i)(e,r):null,new Se(s,u,"final"===a,o)}),m);return b.headers=h,b.body=f.uploadData(),b.progressCallback=s||null,b.errorHandler=sharedErrorHandler(e),b}var xe=function xe(e,t,r){if(function index_esm_isFunction(e){return"function"==typeof e}(e)||null!=t||null!=r)this.next=e,this.error=t,this.complete=r;else{var n=e;this.next=n.next,this.error=n.error,this.complete=n.complete}};function index_esm_async(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,t)}))}}var Ce=function(){function UploadTask(e,t,r){var n=this;void 0===r&&(r=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=getMappings(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){n._request=void 0,n._chunkMultiplier=1,e._codeEquals("canceled")?(n._needToFetchStatus=!0,n.completeTransitions_()):(n._error=e,n._transition("error"))},this._metadataErrorHandler=function(e){n._request=void 0,e._codeEquals("canceled")?n.completeTransitions_():(n._error=e,n._transition("error"))},this._promise=new Promise((function(e,t){n._resolve=e,n._reject=t,n._start()})),this._promise.then(null,(function(){}))}return UploadTask.prototype._makeProgressCallback=function(){var e=this,t=this._transferred;return function(r){return e._updateProgress(t+r)}},UploadTask.prototype._shouldDoResumable=function(e){return e.size()>262144},UploadTask.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},UploadTask.prototype._resolveToken=function(e){var t=this;this._ref.storage._getAuthToken().then((function(r){switch(t._state){case"running":e(r);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))},UploadTask.prototype._createResumable=function(){var e=this;this._resolveToken((function(t){var r=function createResumableUpload(e,t,r,n,o){var i=t.bucketOnlyServerUrl(),a=metadataForUpload_(t,n,o),s={name:a.fullPath},c=makeUrl(i,e.host),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":n.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=toResourceString(a,r),d=e.maxUploadRetryTime,p=new Oe(c,"POST",(function handler(e){var t;checkResumeHeader_(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){handlerCheck(!1)}return handlerCheck(isString(t)),t}),d);return p.urlParams=s,p.headers=u,p.body=l,p.errorHandler=sharedErrorHandler(t),p}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),n=e._ref.storage._makeRequest(r,t);e._request=n,n.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))},UploadTask.prototype._fetchStatus=function(){var e=this,t=this._uploadUrl;this._resolveToken((function(r){var n=function getResumableUploadStatus(e,t,r,n){var o=e.maxUploadRetryTime,i=new Oe(r,"POST",(function handler(e){var t=checkResumeHeader_(e,["active","final"]),r=null;try{r=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){handlerCheck(!1)}r||handlerCheck(!1);var o=Number(r);return handlerCheck(!isNaN(o)),new Se(o,n.size(),"final"===t)}),o);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=sharedErrorHandler(t),i}(e._ref.storage,e._ref._location,t,e._blob),o=e._ref.storage._makeRequest(n,r);e._request=o,o.getPromise().then((function(t){t=t,e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))},UploadTask.prototype._continueUpload=function(){var e=this,t=262144*this._chunkMultiplier,r=new Se(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken((function(o){var i;try{i=continueResumableUpload(e._ref._location,e._ref.storage,n,e._blob,t,e._mappings,r,e._makeProgressCallback())}catch(t){return e._error=t,void e._transition("error")}var a=e._ref.storage._makeRequest(i,o);e._request=a,a.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))},UploadTask.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},UploadTask.prototype._fetchMetadata=function(){var e=this;this._resolveToken((function(t){var r=getMetadata(e._ref.storage,e._ref._location,e._mappings),n=e._ref.storage._makeRequest(r,t);e._request=n,n.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))},UploadTask.prototype._oneShotUpload=function(){var e=this;this._resolveToken((function(t){var r=function multipartUpload(e,t,r,n,o){var i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function genBoundary(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var c=metadataForUpload_(t,n,o),u="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+toResourceString(c,r)+"\r\n--"+s+"\r\nContent-Type: "+c.contentType+"\r\n\r\n",l="\r\n--"+s+"--",d=we.getBlob(u,n,l);if(null===d)throw cannotSliceBlob();var p={name:c.fullPath},h=makeUrl(i,e.host),f=e.maxUploadRetryTime,m=new Oe(h,"POST",metadataHandler(e,r),f);return m.urlParams=p,m.headers=a,m.body=d.uploadData(),m.errorHandler=sharedErrorHandler(t),m}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),n=e._ref.storage._makeRequest(r,t);e._request=n,n.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))},UploadTask.prototype._updateProgress=function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()},UploadTask.prototype._transition=function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=index_esm_canceled(),this._state=e,this._notifyObservers();break;case"error":case"success":this._state=e,this._notifyObservers()}},UploadTask.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(UploadTask.prototype,"snapshot",{get:function(){var e=taskStateFromInternalTaskState(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),UploadTask.prototype.on=function(e,t,r,n){var o=this,i=new xe(t,r,n);return this._addObserver(i),function(){o._removeObserver(i)}},UploadTask.prototype.then=function(e,t){return this._promise.then(e,t)},UploadTask.prototype.catch=function(e){return this.then(null,e)},UploadTask.prototype._addObserver=function(e){this._observers.push(e),this._notifyObserver(e)},UploadTask.prototype._removeObserver=function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)},UploadTask.prototype._notifyObservers=function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))},UploadTask.prototype._finishPromise=function(){if(void 0!==this._resolve){var e=!0;switch(taskStateFromInternalTaskState(this._state)){case fe.SUCCESS:index_esm_async(this._resolve.bind(null,this.snapshot))();break;case fe.CANCELED:case fe.ERROR:index_esm_async(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}},UploadTask.prototype._notifyObserver=function(e){switch(taskStateFromInternalTaskState(this._state)){case fe.RUNNING:case fe.PAUSED:e.next&&index_esm_async(e.next.bind(e,this.snapshot))();break;case fe.SUCCESS:e.complete&&index_esm_async(e.complete.bind(e))();break;case fe.CANCELED:case fe.ERROR:e.error&&index_esm_async(e.error.bind(e,this._error))();break;default:e.error&&index_esm_async(e.error.bind(e,this._error))()}},UploadTask.prototype.resume=function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e},UploadTask.prototype.pause=function(){var e="running"===this._state;return e&&this._transition("pausing"),e},UploadTask.prototype.cancel=function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e},UploadTask}(),Pe=function(){function Reference(e,t){this._service=e,this._location=t instanceof _e?t:_e.makeFromUrl(t,e.host)}return Reference.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},Reference.prototype._newRef=function(e,t){return new Reference(e,t)},Object.defineProperty(Reference.prototype,"root",{get:function(){var e=new _e(this._location.bucket,"");return this._newRef(this._service,e)},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,"name",{get:function(){return lastComponent(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(Reference.prototype,"parent",{get:function(){var e=function index_esm_parent(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;var t=new _e(this._location.bucket,e);return new Reference(this._service,t)},enumerable:!1,configurable:!0}),Reference.prototype._throwIfRoot=function(e){if(""===this._location.path)throw invalidRootOperation(e)},Reference}();function listAll(e){var t={prefixes:[],items:[]};return function listAllHelper(e,t,r){return Object(F.b)(this,void 0,void 0,(function(){var n,o,i;return Object(F.d)(this,(function(a){switch(a.label){case 0:return[4,list$1(e,{pageToken:r})];case 1:return n=a.sent(),(o=t.prefixes).push.apply(o,n.prefixes),(i=t.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,listAllHelper(e,t,n.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}(e,t).then((function(){return t}))}function list$1(e,t){return Object(F.b)(this,void 0,void 0,(function(){var r,n,o;return Object(F.d)(this,(function(i){switch(i.label){case 0:return null!=t&&"number"==typeof t.maxResults&&validateNumber("options.maxResults",1,1e3,t.maxResults),[4,e.storage._getAuthToken()];case 1:return r=i.sent(),n=t||{},o=list(e.storage,e._location,"/",n.pageToken,n.maxResults),[2,e.storage._makeRequest(o,r).getPromise()]}}))}))}function updateMetadata$1(e,t){return Object(F.b)(this,void 0,void 0,(function(){var r,n;return Object(F.d)(this,(function(o){switch(o.label){case 0:return e._throwIfRoot("updateMetadata"),[4,e.storage._getAuthToken()];case 1:return r=o.sent(),n=function updateMetadata(e,t,r,n){var o=makeUrl(t.fullServerUrl(),e.host),i=toResourceString(r,n),a=e.maxOperationRetryTime,s=new Oe(o,"PATCH",metadataHandler(e,n),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=i,s.errorHandler=objectErrorHandler(t),s}(e.storage,e._location,t,getMappings()),[2,e.storage._makeRequest(n,r).getPromise()]}}))}))}function getDownloadURL(e){return Object(F.b)(this,void 0,void 0,(function(){var t,r;return Object(F.d)(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getDownloadURL"),[4,e.storage._getAuthToken()];case 1:return t=n.sent(),r=function getDownloadUrl(e,t,r){var n=makeUrl(t.fullServerUrl(),e.host),o=e.maxOperationRetryTime,i=new Oe(n,"GET",downloadUrlHandler(e,r),o);return i.errorHandler=objectErrorHandler(t),i}(e.storage,e._location,getMappings()),[2,e.storage._makeRequest(r,t).getPromise().then((function(e){if(null===e)throw function noDownloadURL(){return new ce("no-download-url","The given file does not have any download URLs.")}();return e}))]}}))}))}function deleteObject$1(e){return Object(F.b)(this,void 0,void 0,(function(){var t,r;return Object(F.d)(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("deleteObject"),[4,e.storage._getAuthToken()];case 1:return t=n.sent(),r=function deleteObject(e,t){var r=makeUrl(t.fullServerUrl(),e.host),n=e.maxOperationRetryTime,o=new Oe(r,"DELETE",(function handler(e,t){}),n);return o.successCodes=[200,204],o.errorHandler=objectErrorHandler(t),o}(e.storage,e._location),[2,e.storage._makeRequest(r,t).getPromise()]}}))}))}function _getChild(e,t){var r=function child(e,t){var r=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?r:e+"/"+r}(e._location.path,t),n=new _e(e._location.bucket,r);return new Pe(e.storage,n)}function isUrl(e){return/^[A-Za-z]+:\/\//.test(e)}function refFromPath(e,t){if(e instanceof Te){var r=e;if(null==r._bucket)throw function noDefaultBucket(){return new ce("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?")}();var n=new Pe(r,r._bucket);return null!=t?refFromPath(n,t):n}if(void 0!==t){if(t.includes(".."))throw invalidArgument('`path` param cannot contain ".."');return _getChild(e,t)}return e}function index_esm_ref(e,t){if(t&&isUrl(t)){if(e instanceof Te)return function refFromURL(e,t){return new Pe(e,t)}(e,t);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}return refFromPath(e,t)}function extractBucket(e,t){var r=null==t?void 0:t.storageBucket;return null==r?null:_e.makeFromBucketSpec(r,e)}var Te=function(){function StorageService(e,t,r,n,o){this.app=e,this._authProvider=t,this._pool=r,this._url=n,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=n?_e.makeFromBucketSpec(n,this._host):extractBucket(this._host,this.app.options)}return Object.defineProperty(StorageService.prototype,"host",{get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=_e.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(StorageService.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(StorageService.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e},enumerable:!1,configurable:!0}),StorageService.prototype._getAuthToken=function(){return Object(F.b)(this,void 0,void 0,(function(){var e,t;return Object(F.d)(this,(function(r){switch(r.label){case 0:return(e=this._authProvider.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(t=r.sent()))return[2,t.accessToken];r.label=2;case 2:return[2,null]}}))}))},StorageService.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear(),Promise.resolve()},StorageService.prototype._makeStorageReference=function(e){return new Pe(this,e)},StorageService.prototype._makeRequest=function(e,t){var r=this;if(this._deleted)return new ge(appDeleted());var n=function makeRequest(e,t,r,n,o){var i=makeQueryString(e.urlParams),a=e.url+i,s=Object.assign({},e.headers);return function addGmpidHeader_(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function addAuthHeader_(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,r),function addVersionHeader_(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(s,o),new ve(a,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}(e,this._appId,t,this._pool,this._firebaseVersion);return this._requests.add(n),n.getPromise().then((function(){return r._requests.delete(n)}),(function(){return r._requests.delete(n)})),n},StorageService}();function uploadBytesResumable$1(e,t,r){return function uploadBytesResumable(e,t,r){return e._throwIfRoot("uploadBytesResumable"),new Ce(e,new we(t),r)}(e=Object(D.h)(e),t,r)}function getMetadata$2(e){return function getMetadata$1(e){return Object(F.b)(this,void 0,void 0,(function(){var t,r;return Object(F.d)(this,(function(n){switch(n.label){case 0:return e._throwIfRoot("getMetadata"),[4,e.storage._getAuthToken()];case 1:return t=n.sent(),r=getMetadata(e.storage,e._location,getMappings()),[2,e.storage._makeRequest(r,t).getPromise()]}}))}))}(e=Object(D.h)(e))}function ref$1(e,t){return index_esm_ref(e=Object(D.h)(e),t)}var Ee=function(){function UploadTaskSnapshotCompat(e,t,r){this._delegate=e,this.task=t,this.ref=r}return Object.defineProperty(UploadTaskSnapshotCompat.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(UploadTaskSnapshotCompat.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(UploadTaskSnapshotCompat.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(UploadTaskSnapshotCompat.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),UploadTaskSnapshotCompat}(),je=function(){function UploadTaskCompat(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(UploadTaskCompat.prototype,"snapshot",{get:function(){return new Ee(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),UploadTaskCompat.prototype.then=function(e,t){var r=this;return this._delegate.then((function(t){if(e)return e(new Ee(t,r,r._ref))}),t)},UploadTaskCompat.prototype.on=function(e,t,r,n){var o=this,i=void 0;return t&&(i="function"==typeof t?function(e){return t(new Ee(e,o,o._ref))}:{next:t.next?function(e){return t.next(new Ee(e,o,o._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,r||void 0,n||void 0)},UploadTaskCompat}(),Ae=function(){function ListResultCompat(e,t){this._delegate=e,this._service=t}return Object.defineProperty(ListResultCompat.prototype,"prefixes",{get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new Ue(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(ListResultCompat.prototype,"items",{get:function(){var e=this;return this._delegate.items.map((function(t){return new Ue(t,e._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(ListResultCompat.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),ListResultCompat}(),Ue=function(){function ReferenceCompat(e,t){this._delegate=e,this.storage=t}return Object.defineProperty(ReferenceCompat.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(ReferenceCompat.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(ReferenceCompat.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),ReferenceCompat.prototype.toString=function(){return this._delegate.toString()},ReferenceCompat.prototype.child=function(e){return new ReferenceCompat(function _getChild$1(e,t){return _getChild(e,t)}(this._delegate,e),this.storage)},Object.defineProperty(ReferenceCompat.prototype,"root",{get:function(){return new ReferenceCompat(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(ReferenceCompat.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new ReferenceCompat(e,this.storage)},enumerable:!1,configurable:!0}),ReferenceCompat.prototype.put=function(e,t){return this._throwIfRoot("put"),new je(uploadBytesResumable$1(this._delegate,e,t),this)},ReferenceCompat.prototype.putString=function(e,t,r){void 0===t&&(t=ue.RAW),this._throwIfRoot("putString");var n=dataFromString(t,e),o=Object(F.a)({},r);return null==o.contentType&&null!=n.contentType&&(o.contentType=n.contentType),new je(new Ce(this._delegate,new we(n.data,!0),o),this)},ReferenceCompat.prototype.listAll=function(){var e=this;return function listAll$1(e){return listAll(e=Object(D.h)(e))}(this._delegate).then((function(t){return new Ae(t,e.storage)}))},ReferenceCompat.prototype.list=function(e){var t=this;return function list$2(e,t){return list$1(e=Object(D.h)(e),t)}(this._delegate,e||void 0).then((function(e){return new Ae(e,t.storage)}))},ReferenceCompat.prototype.getMetadata=function(){return getMetadata$2(this._delegate)},ReferenceCompat.prototype.updateMetadata=function(e){return function updateMetadata$2(e,t){return updateMetadata$1(e=Object(D.h)(e),t)}(this._delegate,e)},ReferenceCompat.prototype.getDownloadURL=function(){return function getDownloadURL$1(e){return getDownloadURL(e=Object(D.h)(e))}(this._delegate)},ReferenceCompat.prototype.delete=function(){return this._throwIfRoot("delete"),function deleteObject$2(e){return deleteObject$1(e=Object(D.h)(e))}(this._delegate)},ReferenceCompat.prototype._throwIfRoot=function(e){if(""===this._delegate._location.path)throw invalidRootOperation(e)},ReferenceCompat}(),Ie=function(){function StorageServiceCompat(e,t){var r=this;this.app=e,this._delegate=t,this.INTERNAL={delete:function(){return r._delegate._delete()}}}return Object.defineProperty(StorageServiceCompat.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(StorageServiceCompat.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),StorageServiceCompat.prototype.ref=function(e){if(isUrl(e))throw invalidArgument("ref() expected a child path but got a URL, use refFromURL instead.");return new Ue(ref$1(this._delegate,e),this)},StorageServiceCompat.prototype.refFromURL=function(e){if(!isUrl(e))throw invalidArgument("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_e.makeFromUrl(e,this._delegate.host)}catch(e){throw invalidArgument("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ue(ref$1(this._delegate,e),this)},StorageServiceCompat.prototype.setMaxUploadRetryTime=function(e){this._delegate.maxUploadRetryTime=e},StorageServiceCompat.prototype.setMaxOperationRetryTime=function(e){this._delegate.maxOperationRetryTime=e},StorageServiceCompat.prototype.useEmulator=function(e,t){!function useStorageEmulator(e,t,r){e.host="http://"+t+":"+r}(this._delegate,e,t)},StorageServiceCompat}();function factory(e,t){var r=t.instanceIdentifier,n=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal");return new Ie(n,new Te(n,o,new be,r,se.SDK_VERSION))}!function registerStorage(e){var t={TaskState:fe,TaskEvent:he,StringFormat:ue,Storage:Te,Reference:Ue};e.INTERNAL.registerComponent(new B("storage",factory,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage","0.5.1")}(se);r(5);function Home_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Home_Home extends N{constructor(...e){super(...e),Home_defineProperty(this,"search_params",""),Home_defineProperty(this,"results",{}),Home_defineProperty(this,"link",""),Home_defineProperty(this,"getVideoInfoByUrl",N.invoke("getVideoInfoByUrl","6af63d242ccd372d90af4f8b4d4fc187")),Home_defineProperty(this,"searchVideos",N.invoke("searchVideos","6af63d242ccd372d90af4f8b4d4fc187")),Home_defineProperty(this,"downloadVideo",N.invoke("downloadVideo","6af63d242ccd372d90af4f8b4d4fc187"))}async initiate({params:e}){if("search_params"in e&&(this.search_params=e.search_params),String(this.search_params).includes("https")){const e=await this.getVideoInfoByUrl({link:this.search_params}),t={id:e.player_response.videoDetails.videoId,title:e.player_response.videoDetails.title,thumb:e.player_response.videoDetails.thumbnail.thumbnails[3].url};this.results.items=t}else this.results=await this.searchVideos({search_params:e.search_params})}async callDownload({video:e}){if(se.apps.length<1){se.initializeApp({apiKey:"AIzaSyD1MLKqLoHU-rJ70FkR6GClQCnipXqsNI8",authDomain:"ytdl-nullstack.firebaseapp.com",projectId:"ytdl-nullstack",storageBucket:"ytdl-nullstack.appspot.com",messagingSenderId:"438283141364",appId:"1:438283141364:web:11705b218e9d688aa49ea1"})}const t=se.storage(),r=await this.downloadVideo({video:e});let n=r[1]/1024*2;setTimeout(()=>{!async function download(e){let n=await t.ref(r[0]+".mp3");const o=await n.getDownloadURL();var i=document.createElement("a");i.href=o,i.setAttribute("download",""),document.body.appendChild(i),i.click(),document.body.removeChild(i)}(r[0])},n),this.launchToast()}async launchToast(){var e=document.getElementById("toast");e.className="show",setTimeout((function(){e.className=e.className.replace("show","")}),5e3)}render(){return N.element("div",null,N.element("div",{class:"container"},N.element("h1",null,"YTDL - Nullstack"),N.element("form",{source:this,onsubmit:this.ghost_function,class:"row g-2 justify-content-md-center"},N.element("div",{class:"col-10"},N.element("label",{for:"search_params"},"Pesquise ou digite a url"),N.element("input",{id:"search_params",type:"text",class:"form-control",placeholder:"Ex: https://www.youtube.com/watch?v=TM2FtVMqymk",source:this,bind:"search_params"})),N.element("div",{style:"display: flex;",class:"col-2"},N.element("button",{style:"margin: auto; margin-top: 24px; margin-left: 0px; width: 150px",class:"btn btn-success"},N.element("i",{class:"fas fa-search"})))),N.element("br",null),N.element("div",{id:"beforeDownload",class:"container"},N.element("div",{class:"container row"},Object.keys(this.results.items).length>3?this.results.items.map(e=>N.element("div",{class:"card m-1",style:"width: 18rem;"},N.element("img",{src:Array.isArray(e.thumbnails)&&e.thumbnails.length>0?""+e.thumbnails[0].url:"",class:"card-img-top"}),N.element("div",{class:"card-body"},N.element("h5",{class:"card-title"},e.title),N.element("p",{class:"card-text"},e.author)),N.element("button",{class:"btn btn-sm btn-primary",onclick:this.callDownload,video:e},N.element("i",{class:"fas fa-download"})," Download"),N.element("br",null))):0!=Object.keys(this.results.items).length||void 0!==this.results.items.length?N.element("div",{class:"card m-1",style:"width: 18rem;"},N.element("img",{src:this.results.items.thumb,class:"card-img-top"}),N.element("div",{class:"card-body"},N.element("h5",{class:"card-title"},this.results.items.title)),N.element("button",{class:"btn btn-sm btn-primary",onclick:this.callDownload,video:this.results.items},N.element("i",{class:"fas fa-download"})," Download"),N.element("br",null)):N.element("div",null,'"Sem vídeos"')),N.element("div",{id:"toast"},N.element("div",{id:"img"},N.element("i",{class:"fas fa-download"})),N.element("div",{id:"desc"},"Download Iniciado")))))}}Home_defineProperty(Home_Home,"hash","6af63d242ccd372d90af4f8b4d4fc187");var Le=Home_Home;class Application_Application extends N{prepare({page:e}){e.locale="pt-BR"}renderHead(){return N.element("head",null,N.element("link",{href:"https://fonts.gstatic.com",rel:"preconnect"}),N.element("link",{href:"https://fonts.googleapis.com/css2?family=Crete+Round&family=Roboto&display=swap",rel:"stylesheet"}),N.element("link",{href:"https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css",rel:"stylesheet"}),N.element("link",{href:"https://pro.fontawesome.com/releases/v5.10.0/css/all.css",rel:"stylesheet"}),N.element("title",null,"Youtube Downloader - KowaslkiJr"),N.element("script",{src:"https://www.gstatic.com/firebasejs/8.4.3/firebase-app.js"}))}render(){const e=this.renderHead;return N.element("main",null,N.element(e,null),N.element(Le,{route:"/"}))}}!function Application_defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(Application_Application,"hash","7eba4103d4345695891bf07c7860eb6d");var Ne=Application_Application;t.default=N.start(Ne)}]);